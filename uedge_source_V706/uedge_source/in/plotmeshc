integer oldecho = echo
echo = 0

# This file defines a function to plot the UEDGE mesh for a cartesian
# problem, and then calls the function to plot the entire mesh.
# To use this file in a simple way, give the following commands:
#    read plotmesh
#    nf
# The function could then be used in a more sophisticated way
# to plot portions of the mesh, possibly with customized plot limits
# (by resetting any of r_min, r_max, z_min, and z_max):
#    call plotmesh(ixmn,ixmx,iymn,iymx)
#    nf
# where ixmn, ixmx, iymn, and iymx are integer variables or
# expressions.  Always give an "nf" command after reading the file
# plotmesh or calling the function plotmesh.

# DEFINE THE PLOT FUNCTION --

function plotmeshc(ixmin,ixmax,iymin,iymax)
# Plot the cell boundaries for cell indices (ix,iy),
#               ixmin <= ix <= ixmax
#               iymin <= iy <= iymax
integer ix,iy
real r0(5),z0(5)

frame z_min, z_max, r_min, r_max

attr labels=no     # don't label curves
attr scale=equal   # use equal horiz. & vert. grid spacing

titlet=runid
titleb="AXIAL DISTANCE (m)"
titlel="TRANSVERSE DISTANCE (m)"

do ix=ixmin,ixmax
   do iy=iymin,iymax
      r0=[rm(ix,iy,1),rm(ix,iy,2),rm(ix,iy,4),rm(ix,iy,3),rm(ix,iy,1)]
      z0=[zm(ix,iy,1),zm(ix,iy,2),zm(ix,iy,4),zm(ix,iy,3),zm(ix,iy,1)]
      plot r0,z0
   enddo
enddo
sf   # show constructed figure to the user

endf

# MAKE THE PLOT --

ezcshow=false      # don't advance frame after each plot command
ezclegfr=0.        # eliminate all space below plots for legends

real r_min=inf(rm)
real r_max=sup(rm)
real z_min=inf(zm)
real z_max=sup(zm)

call plotmeshc(1,nx,1,ny)

# To reset ezc parameters for other plots do: 
ezcshow=true; ezclegfr=0.125

echo = oldecho
